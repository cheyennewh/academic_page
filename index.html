<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Random Walk - Animated</title>
  <style>
    body {
      background: #0b0c10;
      margin: 0;
      height: 100vh;
      overflow: hidden;
    }
    svg {
      width: 100vw;
      height: 100vh;
    }
    .segment {
      stroke: #1e90ff;
      stroke-width: 4;
      fill: none;
    }
    .walker {
      fill: white;
      r: 6;
    }
  </style>
</head>
<body>
<svg viewBox="0 0 800 600"></svg>

<script>
const svg = document.querySelector("svg");

function generateRandomWalk(x, y, segments = 5, step = 50) {
  const points = [{ x, y }];
  for (let i = 0; i < segments; i++) {
    const angle = Math.random() * Math.PI * 2;
    x += Math.cos(angle) * step;
    y += Math.sin(angle) * step;
    points.push({ x, y });
  }
  return points;
}

function drawSegments(points) {
  for (let i = 0; i < points.length - 1; i++) {
    const line = document.createElementNS("http://www.w3.org/2000/svg", "line");
    line.setAttribute("class", "segment");
    line.setAttribute("x1", points[i].x);
    line.setAttribute("y1", points[i].y);
    line.setAttribute("x2", points[i + 1].x);
    line.setAttribute("y2", points[i + 1].y);
    svg.appendChild(line);
  }
}

function animateWalker(points) {
  const walker = document.createElementNS("http://www.w3.org/2000/svg", "circle");
  walker.setAttribute("class", "walker");
  walker.setAttribute("r", 6);
  svg.appendChild(walker);

  let i = 0;
  function moveNext() {
    if (i >= points.length - 1) return;
    const start = points[i];
    const end = points[i + 1];
    const duration = 500;
    const startTime = performance.now();

    function step(timestamp) {
      const t = Math.min((timestamp - startTime) / duration, 1);
      const x = start.x + (end.x - start.x) * t;
      const y = start.y + (end.y - start.y) * t;
      walker.setAttribute("cx", x);
      walker.setAttribute("cy", y);

      if (t < 1) {
        requestAnimationFrame(step);
      } else {
        i++;
        moveNext();
      }
    }
    requestAnimationFrame(step);
  }
  moveNext();
}

const startX = 400;
const startY = 300;
const walkPoints = generateRandomWalk(startX, startY);
drawSegments(walkPoints);
animateWalker(walkPoints);
</script>
</body>
</html>
